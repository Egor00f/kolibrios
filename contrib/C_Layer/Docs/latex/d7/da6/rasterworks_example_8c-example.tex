\doxysection{rasterworks\+\_\+example.\+c}
\hypertarget{rasterworks_example_8c-example}{}\label{rasterworks_example_8c-example}example of using rasterworks library


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <kos32sys.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{kolibri__gui_8h}{kolibri\_gui.h}}>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{kolibri__rasterworks_8h}{kolibri\_rasterworks.h}}>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ main()}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \textcolor{comment}{/*\ Load\ all\ libraries,\ initialize\ global\ tables\ like\ system\ color\ table\ and}}
\DoxyCodeLine{\textcolor{comment}{\ \ \ \ \ operations\ table.\ kolibri\_gui\_init()\ will\ EXIT\ with\ mcall\ -\/1\ if\ it\ fails}}
\DoxyCodeLine{\textcolor{comment}{\ \ \ \ \ to\ do\ it's\ job.\ This\ is\ all\ you\ need\ to\ call\ and\ all\ libraries\ and\ GUI}}
\DoxyCodeLine{\textcolor{comment}{\ \ \ \ \ elements\ can\ be\ used\ after\ a\ successful\ call\ to\ this\ function}}
\DoxyCodeLine{\textcolor{comment}{\ \ */}}
\DoxyCodeLine{\ \ \mbox{\hyperlink{kolibri__gui_8h_a8b904ab02df6cc248ac2a4cbb33295c3}{kolibri\_gui\_init}}();}
\DoxyCodeLine{\ \ \mbox{\hyperlink{kolibri__rasterworks_8h_a6f4e39486aa4d2a58140c9cad796a1d1}{kolibri\_rasterworks\_init}}();}
\DoxyCodeLine{\ \ \textcolor{comment}{/*\ Set\ gui\_event\ to\ REDRAW\ so\ that\ window\ is\ drawn\ in\ first\ iteration\ \ */}}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ gui\_event\ =\ \mbox{\hyperlink{kolibri__gui_8h_a97735f796c03253d408c7e5bdf5f37dca0a84f1803dcad15708cd5bf208a8118a}{KOLIBRI\_EVENT\_REDRAW}};}
\DoxyCodeLine{\ \ oskey\_t\ \mbox{\hyperlink{kolibri__editor_8h_a6efc9555d65f172040066b7da1e3d2a0}{key}};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{structkolibri__window}{kolibri\_window}}\ *main\_window\ =\ \mbox{\hyperlink{kolibri__gui__elements_8h_a62aa1b7d35feb27a0a4cc4cd909e8cb2}{kolibri\_new\_window}}(50,\ 50,\ 800,\ 300,\ \textcolor{stringliteral}{"{}rasterworks\ example"{}});}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ \textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{kolibri__editbox_8h_ab5b37242fb83f9460dc7944d3ba27767}{press\_key}};}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ \textcolor{keywordtype}{int}\ ln\_str\ =\ \mbox{\hyperlink{kolibri__rasterworks_8h_afd0d07b5a6fb419ab7353b6176518814}{countUTF8Z}}(\textcolor{stringliteral}{"{}Пример\ работы"{}},\ -\/1);}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{void}\ *buffi\ =\ malloc(768*256*3\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}));}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ \ *((\textcolor{keywordtype}{int}*)buffi)\ =\ 768;}
\DoxyCodeLine{\ \ \ *((\textcolor{keywordtype}{int}*)buffi+1)\ =\ 256;}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ memset((\textcolor{keywordtype}{char}*)buffi+8,\ (\textcolor{keywordtype}{char})-\/1,\ 768*256*3);}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ debug\_board\_printf(\textcolor{stringliteral}{"{}String\ len:\ \%d\ \(\backslash\)n"{}},\ ln\_str);}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ \mbox{\hyperlink{kolibri__rasterworks_8h_a5144721ab30b914ca5ee359b24ceb267}{drawText}}(buffi,\ 0,\ 0,\ \textcolor{stringliteral}{"{}Пример\ работы"{}},\ ln\_str,\ 0xFF000000,\ 0x30C18);}
\DoxyCodeLine{\ \ \mbox{\hyperlink{kolibri__rasterworks_8h_a5144721ab30b914ca5ee359b24ceb267}{drawText}}(buffi,\ 0,\ 32,\ \textcolor{stringliteral}{"{}Пример\ работы"{}},\ ln\_str,\ 0xFF000000,\ 0x1030C18);}
\DoxyCodeLine{\ \ \mbox{\hyperlink{kolibri__rasterworks_8h_a5144721ab30b914ca5ee359b24ceb267}{drawText}}(buffi,\ 0,\ 64,\ \textcolor{stringliteral}{"{}Пример\ работы"{}},\ ln\_str,\ 0xFF000000,\ 0x2030C18);}
\DoxyCodeLine{\ \ \mbox{\hyperlink{kolibri__rasterworks_8h_a5144721ab30b914ca5ee359b24ceb267}{drawText}}(buffi,\ 0,\ 96,\ \textcolor{stringliteral}{"{}Пример\ работы"{}},\ ln\_str,\ 0xFF000000,\ 0x4030C18);}
\DoxyCodeLine{\ \ \mbox{\hyperlink{kolibri__rasterworks_8h_a5144721ab30b914ca5ee359b24ceb267}{drawText}}(buffi,\ 0,\ 128,\ \textcolor{stringliteral}{"{}Пример\ работы"{}},\ ln\_str,\ 0xFF000000,\ 0x8030C18);}
\DoxyCodeLine{\ \ \mbox{\hyperlink{kolibri__rasterworks_8h_a5144721ab30b914ca5ee359b24ceb267}{drawText}}(buffi,\ 0,\ 160,\ \textcolor{stringliteral}{"{}Пример\ работы"{}},\ ln\_str,\ 0xFF000000,\ 0x0F031428);}
\DoxyCodeLine{\ \ }
\DoxyCodeLine{\ \ \textcolor{keywordflow}{do}\ \ \textcolor{comment}{/*\ Start\ of\ main\ activity\ loop\ */}}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{if}(gui\_event\ ==\ \mbox{\hyperlink{kolibri__gui_8h_a97735f796c03253d408c7e5bdf5f37dca0a84f1803dcad15708cd5bf208a8118a}{KOLIBRI\_EVENT\_REDRAW}})}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{kolibri__gui_8h_a81a1ea83d66ffc14350b4b72b078a3ef}{kolibri\_handle\_event\_redraw}}(main\_window);}
\DoxyCodeLine{\ \ \ \ \ \ DrawBitmap(buffi+8,\ 5,\ 5,\ 768,\ 256);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(gui\_event\ ==\ \mbox{\hyperlink{kolibri__gui_8h_a97735f796c03253d408c7e5bdf5f37dca563a416dc7f301d71a631da21a3963aa}{KOLIBRI\_EVENT\_KEY}})}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{kolibri__editor_8h_a6efc9555d65f172040066b7da1e3d2a0}{key}}\ =\ get\_key();}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{kolibri__editor_8h_a6efc9555d65f172040066b7da1e3d2a0}{key}}.code)}
\DoxyCodeLine{\ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{kolibri__editbox_8h_ab5b37242fb83f9460dc7944d3ba27767}{press\_key}}\ =\ \mbox{\hyperlink{kolibri__editor_8h_a6efc9555d65f172040066b7da1e3d2a0}{key}}.val;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{kolibri__gui_8h_a90720148918d989921c1572058d21a58}{kolibri\_handle\_event\_key}}(main\_window,\ \mbox{\hyperlink{kolibri__editor_8h_a6efc9555d65f172040066b7da1e3d2a0}{key}});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(gui\_event\ ==\ \mbox{\hyperlink{kolibri__gui_8h_a97735f796c03253d408c7e5bdf5f37dca775f06d5461504664e4a97428e9d7a2e}{KOLIBRI\_EVENT\_BUTTON}})}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ pressed\_button\ =\ \mbox{\hyperlink{kolibri__button_8h_a55ae7b6ad65b2e19c77cc7ad0183191f}{kolibri\_button\_get\_identifier}}();}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (pressed\_button)}
\DoxyCodeLine{\ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{kolibri__gui_8h_a198bffa888e7f18fbee8a13b209976c0}{BUTTON\_CLOSE}}:}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{kolibri__gui_8h_a0830b6d7b228582bd73694d2d85b47cc}{kolibri\_exit}}();}
\DoxyCodeLine{\ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(gui\_event\ ==\ \mbox{\hyperlink{kolibri__gui_8h_a97735f796c03253d408c7e5bdf5f37dca3e55219fb3a0deaa00798ad87e12a401}{KOLIBRI\_EVENT\_MOUSE}})}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \mbox{\hyperlink{kolibri__gui_8h_a5970422747362f11880a68439b7ef870}{kolibri\_handle\_event\_mouse}}(main\_window);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{while}((gui\_event\ =\ get\_os\_event()));\ \textcolor{comment}{/*\ End\ of\ main\ activity\ loop\ */}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{comment}{/*\ kolibri\_quit();\ */}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\}}

\end{DoxyCodeInclude}
 